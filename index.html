<html>
<head>
<title>小鶴姬の戰之年代記のAP戰功計算</title>
<script src='jq.js'></script>
<script src='abc.js'></script>

</head>
<body bgcolor="#CFFFEE">
<h1>以下會得出最多戰功的組合:</h1>
請選擇能打的戰功free任:
<TABLE border=1 bgcolor="#FFFFFF">
<thead>
<tr bgcolor="#ff7f00">
<th>地點</th><th>名</th><th>AP</th><th>合計戰功</th><TH></th>
</tr>
</thead>
<tbody id="misionlist">
	
</tbody>
</table>
<div>
最大/現有AP:<input type="text" id="maxap" value='60'/>
<br>
可忍受自動回復時間:<input type="text" id="maxtime" value='0'/>分鐘
<br>
目標戰功:<input type="text" id="maxpoint" value='7000000'/>
<br>
隊伍倍率:<input type="text" id="maxpow" value='1'/>1+倍武(0.5+0.?+0.?+.....)
<br>
<button id='stbt'> Start</button>
</div>
結果:<BR>
<DIV>
<TABLE border=1 bgcolor="#FFFFFF">
<thead>
<tr bgcolor="#ffff00">
<th>地點</th><th>名</th><th>AP</th><th>合計戰功</th>
</tr>
</thead>
<tbody id="resmisionlist">
	
</tbody>
</table>
</div>
<script>
$("#misionlist").html("");
var tmpstr="";
for(var i=0;i<tempa.length;i++)
{
	tmpstr+="<tr>";
	tmpstr+="<td>"+ tempname[i][0]+"</td>";
	tmpstr+="<td>"+ tempname[i][1]+"</td>";
	tmpstr+="<td>"+ tempa[i][0]+"</td>";
	tmpstr+="<td>"+ tempa[i][1]+"</td>";
	tmpstr+="<td><input type='checkbox' name='tidchb[]' value="+i+" checked></td>";
	tmpstr+="</tr>";
}
$("#misionlist").html(tmpstr);
$("#stbt").click(function()
{
	var nmission=[];
	$("input[name='tidchb[]']:checked").each(function()
	{
		nmission.push(tempa[$(this).val()]);
	});
	var maxapp=$("#maxap").val()*1+Math.floor($("#maxtime").val()/8)*1
	var bestarr=findsolution(maxapp,nmission);
	$("#resmisionlist").html("");
	var tmpstr="";
	var sumcostt=0;
	var bestc=0;
	for(var i=0;i<bestarr.length;i++)
	{
		var idd=bestarr[i];
		var rid=nmission[idd][2];
		tmpstr+="<tr>";
		tmpstr+="<td>"+tempname[rid][0]+"</td>";
		tmpstr+="<td>"+tempname[rid][1]+"</td>";
		tmpstr+="<td>"+nmission[idd][0]+"</td>";
		tmpstr+="<td>"+nmission[idd][1]+"</td>";
		sumcostt=sumcostt+nmission[idd][0];
		bestc=bestc+nmission[idd][1];
		tmpstr+="</tr>";
	}
	tmpstr+="<tr><td>Total Cost:</td><td>"+sumcostt+"</td></tr>";
	tmpstr+="<tr><td>Total Point:</td><td>"+(bestc*$("#maxpow").val())+"</td><td>"+(bestc*$("#maxpow").val()*1.5)+"(FT)</td><td>"+(bestc*$("#maxpow").val()*2.5)+"(GFT)</td></tr>";
	var mapp=$("#maxpoint").val();
	tmpstr+="<tr>";
	tmpstr+="<td>Total AP:</td>";
	var tap=((mapp/(bestc*$("#maxpow").val()))*sumcostt);
	tmpstr+="<td>"+Math.ceil(tap)+"|"+Math.ceil(tap/maxapp)+"</td>";
	tap=((mapp/(bestc*$("#maxpow").val()*1.5))*sumcostt);
	tmpstr+="<td>"+Math.ceil(tap)+"|"+Math.ceil(tap/maxapp)+"(FT)</td>";
	tap=((mapp/(bestc*$("#maxpow").val()*2.5))*sumcostt);
	tmpstr+="<td>"+Math.ceil(tap)+"|"+Math.ceil(tap/maxapp)+"(GFT)</td>";
	tmpstr+="</tr>";
	
	
	tmpstr+="<tr><td>calcTime:</td><td>"+calat+"</td></tr>";
$("#resmisionlist").html(tmpstr);
});
</script>
</body>
</html>